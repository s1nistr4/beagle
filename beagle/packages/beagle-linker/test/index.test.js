"use strict";var assert=require("assert"),fs=require("fs"),link=require("../");function testDir(a){fs.readdirSync(a).forEach(function(b){/\.input\.json$/.test(b)&&test(b,function(){var c=link(JSON.parse(fs.readFileSync(a+"/"+b,"utf8")));expect(c).toMatchSnapshot()})})}function testDirError(a){fs.readdirSync(a).forEach(function(b){/\.input\.json$/.test(b)&&test(b,function(){var c,d=JSON.parse(fs.readFileSync(a+"/"+b,"utf8"));try{link(d)}catch(a){c={msg:a.msg,code:a.code,line:a.line}}if(!c)throw new Error("Expected error");expect(c).toMatchSnapshot()})})}describe("cases from pug",function(){testDir(__dirname+"/cases")}),describe("special cases",function(){testDir(__dirname+"/special-cases")}),describe("error handling",function(){testDirError(__dirname+"/errors")});